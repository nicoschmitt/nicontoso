!function(e,n,t){"use strict";n.module("angulartics.google.analytics",["angulartics"]).config(["$analyticsProvider",function(i){function a(){var n=e.GoogleAnalyticsObject;return n&&e[n]}function r(){return!n.isUndefined(e._gaq)}function c(e){var n,t={};for(n in e)n.indexOf("dimension")&&n.indexOf("metric")||(t[n]=e[n]);return t}i.settings.pageTracking.trackRelativePath=!0,i.settings.ga={additionalAccountNames:t,additionalAccountHitTypes:{pageview:!0,event:!0,exception:!1,ecommerce:!1,userTiming:!1,setUserProperties:!1,userId:!1},disableEventTracking:null,disablePageTracking:null,enhancedEcommerce:!1,transport:null,userId:null},i.registerPageTrack(function(e,t){t=t||{},i.settings.ga.disablePageTracking||o("pageview","send",n.extend({},t,{hitType:"pageview",page:e}))}),i.registerEventTrack(function(t,a){if(!i.settings.ga.disableEventTracking&&(t||t+""=="0")){if(a=a||{},a.category=a.category||"Event",a.value){var r=parseInt(a.value,10);a.value=isNaN(r)?0:r}n.isFunction(a.hitCallback)||(a.hitCallback=null),a.nonInteraction=a.nonInteraction||a.noninteraction,o("event","send",n.extend({},a,{hitType:"event",eventCategory:a.category,eventAction:t,eventLabel:a.label,eventValue:a.value,nonInteraction:a.nonInteraction,page:a.page||e.location.hash.substring(1)||e.location.pathname,hitCallback:a.hitCallback}))}}),i.registerExceptionTrack(function(n,t){o("exception","send",{hitType:"event",eventCategory:"Exceptions",eventAction:n.toString(),eventLabel:n.stack,nonInteraction:!0,page:e.location.hash.substring(1)||e.location.pathname,isException:!0})}),i.registerSetUsername(function(e){i.settings.ga.userId=e}),i.registerSetUserProperties(function(e){e&&o("setUserProperties","set",c(e))}),i.registerUserTimings(function(t){return!n.isObject(t)||n.isArray(t)?console.log("Required argument properties is missing or not an object"):(n.forEach(["timingCategory","timingVar","timingValue"],function(e){if(n.isUndefined(t[e]))return console.log("Argument properties missing required property "+e)}),void o("userTiming","send",{hitType:"timing",timingCategory:t.timingCategory,timingVar:t.timingVar,timingValue:t.timingValue,timingLabel:t.timingLabel,optSampleRate:t.optSampleRate,page:t.page||e.location.hash.substring(1)||e.location.pathname}))}),i.registerTransactionTrack(function(e){var t,i;if(o("ecommerce","require","ecommerce"),o("ecommerce","ecommerce:addTransaction",e),e.products)for(i=0;i<e.products.length;i++)t=e.products[i],t.sku=t.id,t.id=e.id,o("ecommerce","ecommerce:addItem",e.products[i]);e.currencyCode&&o("ecommerce","_set",e.currencyCode),o("ecommerce","ecommerce:send",n.copy(e))});var o=function(){function t(e,t,a){var r,o,s=i.settings.ga.userId;if("require"===e&&"ecommerce"===t)return o=t,i.settings.ga.enhancedEcommerce&&(o="ec"),c([e,o],a);if(s&&n.isObject(t)&&(t.userId=s),i.settings.ga.transport&&(t.transport=i.settings.ga.transport),e.indexOf("ecommerce:")>-1&&i.settings.ga.enhancedEcommerce)switch(e){case"ecommerce:addTransaction":e=["ec:setAction","purchase"];break;case"ecommerce:addItem":e="ec:addProduct",t.id=t.sku;break;case"ecommerce:send":e="send",t.hitType="event",t.eventCategory="Angulartics Enhanced Ecommerce",t.eventAction="Purchase",t.nonInteraction=!0}r=e instanceof Array?e.concat(t):[e,t],c(r,a)}function c(t,a){var r,c=i.settings.ga.userId,o=e.GoogleAnalyticsObject;e[o].apply(this,t),a&&(r=n.copy(t),c&&!i.settings.ga.additionalAccountHitTypes.userId&&r[2]&&"object"==typeof r[2]&&delete r[2].userId,n.forEach(i.settings.ga.additionalAccountNames,function(n){r[0]=n+"."+r[0],e[o].apply(this,r)}))}function o(t,a,r){if("set"===t)return console.log('Classic Analytics does not support the "set" command or Custom Dimensions. Command ignored.');var c;if("send"===t)switch(a.hitType){case"pageview":c=["_trackPageview",a.page];break;case"event":c=["_trackEvent",a.category,a.action,a.label,a.value,a.nonInteraction];break;case"timing":c=["_trackTiming",a.timingCategory,a.timingVar,a.timingValue,a.timingLabel,a.optSampleRate]}return"ecommerce:addTransaction"===t&&(c=["_addTrans",a.id,a.affiliation,a.revenue,a.tax,a.shipping,a.billingCity,a.billingRegion,a.billingCountry]),"ecommerce:addItem"===t&&(c=["_addItem",a.id,a.sku,a.name,a.category,a.price,a.quantity]),"_set"===t&&(c=["_set","currencyCode",a]),"ecommerce:send"===t&&(c=["_trackTrans"]),c?(e._gaq.push(c),void(r&&n.forEach(i.settings.ga.additionalAccountNames,function(n){var t=[].slice.call(c);t[0]=n+"."+t[0],e._gaq.push(t)}))):console.log("Unable to find command "+t+" or fieldsObj missing required properties. Command ignored.")}var s;return r()&&(s=o),a()&&(s=t),s?function(e,n,t){var a=i.settings.ga.additionalAccountHitTypes[e];s(n,t,a)}:n.noop}()}])}(window,window.angular);