!function(t,e){"use strict";function n(){function e(t){return function(){g.waitForVendorCount&&(l[t]||(l[t]=[]),l[t].push(arguments))}}function n(e,n,i){return p[e]||(p[e]=[]),p[e].push(n),h[n]=i,function(){if(!this.settings.optOut){var n=Array.prototype.slice.apply(arguments);return this.$inject(["$q",t.bind(this,function(i){return i.all(p[e].map(function(e){if((h[e]||{}).async){var a=i.defer(),r=t.copy(n);return r.unshift(a.resolve),e.apply(this,r),a.promise}return i.when(e.apply(this,n))},this))})])}}}function i(t,e){e?setTimeout(t,e):t()}function a(e,a,r){if(!u.developerMode){k[e]=n(e,a,r);var s=u[e],o=s?s.bufferFlushDelay:null,c=null!==o?o:u.bufferFlushDelay;t.forEach(l[e],function(t,e){i(function(){a.apply(this,t)},e*c)})}}function r(t){return t.replace(/^./,function(t){return t.toUpperCase()})}function s(t){var i="register"+r(t);d[i]=function(e,n){a(t,e,n)},k[t]=n(t,e(t))}function o(e,n,i){t.forEach(n,i);for(var a in e)c[a]=e[a]}var c=this,u={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,trackRoutes:!0,trackStates:!0,autoBasePath:!1,basePath:"",excludedRoutes:[],queryKeysWhitelisted:[],queryKeysBlacklisted:[]},eventTracking:{},bufferFlushDelay:1e3,trackExceptions:!1,optOut:!1,developerMode:!1},f=["pageTrack","eventTrack","exceptionTrack","transactionTrack","setAlias","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce","incrementProperty","userTimings","clearCookies"],l={},p={},h={},k={settings:u};k.setOptOut=function(t){this.settings.optOut=t,T()},k.getOptOut=function(){return this.settings.optOut};var d={$get:["$injector",function(t){return v(t)}],api:k,settings:u,virtualPageviews:function(t){this.settings.pageTracking.autoTrackVirtualPages=t},trackStates:function(t){this.settings.pageTracking.trackStates=t},trackRoutes:function(t){this.settings.pageTracking.trackRoutes=t},excludeRoutes:function(t){this.settings.pageTracking.excludedRoutes=t},queryKeysWhitelist:function(t){this.settings.pageTracking.queryKeysWhitelisted=t},queryKeysBlacklist:function(t){this.settings.pageTracking.queryKeysBlacklisted=t},firstPageview:function(t){this.settings.pageTracking.autoTrackFirstPage=t},withBase:function(e){this.settings.pageTracking.basePath=e?t.element(document).find("base").attr("href"):""},withAutoBase:function(t){this.settings.pageTracking.autoBasePath=t},trackExceptions:function(t){this.settings.trackExceptions=t},developerMode:function(t){this.settings.developerMode=t}},v=function(e){return t.extend(k,{$inject:e.invoke})},T=function(){o(d,f,s)};o(d,f,s)}function i(e,n,i,a){function r(t){for(var e=0;e<i.settings.pageTracking.excludedRoutes.length;e++){var n=i.settings.pageTracking.excludedRoutes[e];if(n instanceof RegExp&&n.test(t)||t.indexOf(n)>-1)return!0}return!1}function s(t,e){for(var n=[],i=0;i<t.length;i++)-1===e.indexOf(t[i])&&n.push(t[i]);return n}function o(t,e,n){if(/\?/.test(t)&&e.length>0){for(var i=t.split("?"),a=i[0],r=i[1].split("&"),o=[],c=0;c<e.length;c++)for(var u=e[c],g=0;g<r.length;g++)(u instanceof RegExp&&u.test(r[g])||r[g].indexOf(u)>-1)&&o.push(r[g]);var f="white"==n?o:s(r,o);return f.length>0?a+"?"+f.join("&"):a}return t}function c(t){return o(t,i.settings.pageTracking.queryKeysWhitelisted,"white")}function u(t){return o(t,i.settings.pageTracking.queryKeysBlacklisted,"black")}function g(t,e){r(t)||(t=u(t=c(t)),i.pageTrack(t,e))}i.settings.pageTracking.autoTrackFirstPage&&a.invoke(["$location",function(t){var e=!0;if(a.has("$route")){var r=a.get("$route");if(r)for(var s in r.routes){e=!1;break}else null===r&&(e=!1)}else if(a.has("$state")){var o=a.get("$state");for(var c in o.get()){e=!1;break}}e&&(i.settings.pageTracking.autoBasePath&&(i.settings.pageTracking.basePath=n.location.pathname),i.settings.pageTracking.trackRelativePath?g(i.settings.pageTracking.basePath+t.url(),t):g(t.absUrl(),t))}]),i.settings.pageTracking.autoTrackVirtualPages&&a.invoke(["$location",function(t){i.settings.pageTracking.autoBasePath&&(i.settings.pageTracking.basePath=n.location.pathname+"#");var r=!0;if(i.settings.pageTracking.trackRoutes&&a.has("$route")){var s=a.get("$route");if(s)for(var o in s.routes){r=!1;break}else null===s&&(r=!1);e.$on("$routeChangeSuccess",function(e,n){n&&(n.$$route||n).redirectTo||g(i.settings.pageTracking.basePath+t.url(),t)})}i.settings.pageTracking.trackStates&&(a.has("$state")&&!a.has("$transitions")&&(r=!1,e.$on("$stateChangeSuccess",function(e,n){g(i.settings.pageTracking.basePath+t.url(),t)})),a.has("$state")&&a.has("$transitions")&&(r=!1,a.invoke(["$transitions",function(e){e.onSuccess({},function(e){e.options().notify&&g(i.settings.pageTracking.basePath+t.url(),t)})}]))),r&&e.$on("$locationChangeSuccess",function(e,n){n&&(n.$$route||n).redirectTo||(i.settings.pageTracking.trackRelativePath?g(i.settings.pageTracking.basePath+t.url(),t):g(t.absUrl(),t))})}]),i.settings.developerMode&&t.forEach(i,function(t,e){"function"==typeof t&&(i[e]=function(){})})}function a(e){return{restrict:"A",link:function(n,i,a){var r=a.analyticsOn||"click",s={};t.forEach(a.$attr,function(t,e){c(e)&&(s[u(e)]=a[e],a.$observe(e,function(t){s[u(e)]=t}))}),t.element(i[0]).bind(r,function(r){var c=a.analyticsEvent||o(i[0]);s.eventType=r.type,a.analyticsIf&&!n.$eval(a.analyticsIf)||(a.analyticsProperties&&t.extend(s,n.$eval(a.analyticsProperties)),e.eventTrack(c,s))})}}}function r(t){t.decorator("$exceptionHandler",["$delegate","$injector",function(t,e){return function(n,i){var a=t(n,i),r=e.get("$analytics");return r.settings.trackExceptions&&r.exceptionTrack(n,i),a}}])}function s(t){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(t.tagName.toLowerCase()+":"+(t.type||""))>=0}function o(t){return s(t)?t.innerText||t.value:t.id||t.name||t.tagName}function c(t){return"analytics"===t.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(t.substr(9))}function u(t){var e=t.slice(9);return void 0!==e&&null!==e&&e.length>0?e.substring(0,1).toLowerCase()+e.substring(1):e}var g=window.angulartics||(window.angulartics={});g.waitForVendorCount=0,g.waitForVendorApi=function(t,e,n,i,a){a||g.waitForVendorCount++,i||(i=n,n=void 0),!Object.prototype.hasOwnProperty.call(window,t)||void 0!==n&&void 0===window[t][n]?setTimeout(function(){g.waitForVendorApi(t,e,n,i,!0)},e):(g.waitForVendorCount--,i(window[t]))},t.module("angulartics",[]).provider("$analytics",n).run(["$rootScope","$window","$analytics","$injector",i]).directive("analyticsOn",["$analytics",a]).config(["$provide",r])}(angular);