!function(t,e){"use strict";function n(){function e(t){return function(){g.waitForVendorCount&&(u[t]||(u[t]=[]),u[t].push(arguments))}}function n(e,n,a){return f[e]||(f[e]=[]),f[e].push(n),l[n]=a,function(){var n=Array.prototype.slice.apply(arguments);return this.$inject(["$q",t.bind(this,function(a){return a.all(f[e].map(function(e){var i=l[e]||{};if(i.async){var r=a.defer(),s=t.copy(n);return s.unshift(r.resolve),e.apply(this,s),r.promise}return a.when(e.apply(this,n))},this))})])}}function a(t,e){e?setTimeout(t,e):t()}function i(e,i,r){if(!o.developerMode){p[e]=n(e,i,r);var s=o[e],c=s?s.bufferFlushDelay:null,g=null!==c?c:o.bufferFlushDelay;t.forEach(u[e],function(t,e){a(function(){i.apply(this,t)},e*g)})}}function r(t){return t.replace(/^./,function(t){return t.toUpperCase()})}function s(t){var a="register"+r(t);v[a]=function(e,n){i(t,e,n)},p[t]=n(t,e(t))}var o={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:"",excludedRoutes:[]},eventTracking:{},bufferFlushDelay:1e3,trackExceptions:!1,developerMode:!1},c=["pageTrack","eventTrack","exceptionTrack","transactionTrack","setAlias","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce","incrementProperty","userTimings"],u={},f={},l={},p={settings:o},v={$get:["$injector",function(t){return h(t)}],api:p,settings:o,virtualPageviews:function(t){this.settings.pageTracking.autoTrackVirtualPages=t},excludeRoutes:function(t){this.settings.pageTracking.excludedRoutes=t},firstPageview:function(t){this.settings.pageTracking.autoTrackFirstPage=t},withBase:function(e){this.settings.pageTracking.basePath=e?t.element(document).find("base").attr("href"):""},withAutoBase:function(t){this.settings.pageTracking.autoBasePath=t},trackExceptions:function(t){this.settings.trackExceptions=t},developerMode:function(t){this.settings.developerMode=t}},h=function(e){return t.extend(p,{$inject:e.invoke})};t.forEach(c,s);for(var d in v)this[d]=v[d]}function a(e,n,a,i){function r(t){for(var e=0;e<a.settings.pageTracking.excludedRoutes.length;e++){var n=a.settings.pageTracking.excludedRoutes[e];if(n instanceof RegExp&&n.test(t)||t.indexOf(n)>-1)return!0}return!1}function s(t,e){r(t)||a.pageTrack(t,e)}a.settings.pageTracking.autoTrackFirstPage&&i.invoke(["$location",function(t){var e=!0;if(i.has("$route")){var r=i.get("$route");if(r)for(var o in r.routes){e=!1;break}else null===r&&(e=!1)}else if(i.has("$state")){var c=i.get("$state");for(var u in c.get()){e=!1;break}}if(e)if(a.settings.pageTracking.autoBasePath&&(a.settings.pageTracking.basePath=n.location.pathname),a.settings.pageTracking.trackRelativePath){var g=a.settings.pageTracking.basePath+t.url();s(g,t)}else s(t.absUrl(),t)}]),a.settings.pageTracking.autoTrackVirtualPages&&i.invoke(["$location",function(t){a.settings.pageTracking.autoBasePath&&(a.settings.pageTracking.basePath=n.location.pathname+"#");var r=!0;if(i.has("$route")){var o=i.get("$route");if(o)for(var c in o.routes){r=!1;break}else null===o&&(r=!1);e.$on("$routeChangeSuccess",function(e,n){if(!n||!(n.$$route||n).redirectTo){var i=a.settings.pageTracking.basePath+t.url();s(i,t)}})}i.has("$state")&&!i.has("$transitions")&&(r=!1,e.$on("$stateChangeSuccess",function(e,n){var i=a.settings.pageTracking.basePath+t.url();s(i,t)})),i.has("$state")&&i.has("$transitions")&&(r=!1,i.invoke(["$transitions",function(e){e.onSuccess({},function(e){var n=e.options();if(n.notify){var i=a.settings.pageTracking.basePath+t.url();s(i,t)}})}])),r&&e.$on("$locationChangeSuccess",function(e,n){if(!n||!(n.$$route||n).redirectTo)if(a.settings.pageTracking.trackRelativePath){var i=a.settings.pageTracking.basePath+t.url();s(i,t)}else s(t.absUrl(),t)})}]),a.settings.developerMode&&t.forEach(a,function(t,e){"function"==typeof t&&(a[e]=function(){})})}function i(e){return{restrict:"A",link:function(n,a,i){var r=i.analyticsOn||"click",s={};t.forEach(i.$attr,function(t,e){c(e)&&(s[u(e)]=i[e],i.$observe(e,function(t){s[u(e)]=t}))}),t.element(a[0]).bind(r,function(r){var c=i.analyticsEvent||o(a[0]);s.eventType=r.type,i.analyticsIf&&!n.$eval(i.analyticsIf)||(i.analyticsProperties&&t.extend(s,n.$eval(i.analyticsProperties)),e.eventTrack(c,s))})}}}function r(t){t.decorator("$exceptionHandler",["$delegate","$injector",function(t,e){return function(n,a){var i=t(n,a),r=e.get("$analytics");return r.settings.trackExceptions&&r.exceptionTrack(n,a),i}}])}function s(t){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(t.tagName.toLowerCase()+":"+(t.type||""))>=0}function o(t){return s(t)?t.innerText||t.value:t.id||t.name||t.tagName}function c(t){return"analytics"===t.substr(0,9)&&["On","Event","If","Properties","EventType"].indexOf(t.substr(9))===-1}function u(t){var e=t.slice(9);return"undefined"!=typeof e&&null!==e&&e.length>0?e.substring(0,1).toLowerCase()+e.substring(1):e}var g=window.angulartics||(window.angulartics={});g.waitForVendorCount=0,g.waitForVendorApi=function(t,e,n,a,i){i||g.waitForVendorCount++,a||(a=n,n=void 0),!Object.prototype.hasOwnProperty.call(window,t)||void 0!==n&&void 0===window[t][n]?setTimeout(function(){g.waitForVendorApi(t,e,n,a,!0)},e):(g.waitForVendorCount--,a(window[t]))},t.module("angulartics",[]).provider("$analytics",n).run(["$rootScope","$window","$analytics","$injector",a]).directive("analyticsOn",["$analytics",i]).config(["$provide",r])}(angular);